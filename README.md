# Frontend Clean Architecture

> [Read this in English üá¨üáß](https://github.com/bespoyasov/frontend-clean-architecture/blob/master/docs/en.md)

–ü—Ä–∏–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ —Ç—Ä—ë—Ö—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

- [–°–ª–∞–π–¥—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏](https://bespoyasov.ru/talks/podlodka-conf-clean-architecture/);
- [–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](https://bespoyasov.ru/showcase/frontend-clean-architecture/);
- [–ó–∞–ø–∏—Å—å –¥–æ–∫–ª–∞–¥–∞](https://youtu.be/h4WQRqNjmX0).

## –ß—Ç–æ —É—á–µ—Å—Ç—å

–í –∫–æ–¥–µ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤, –æ –∫–æ—Ç–æ—Ä—ã—Ö —è —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª –≤ –¥–æ–∫–ª–∞–¥–µ –Ω–∞ Frontend Crew. 

### Shared Kernel

Shared Kernel ‚Äî —ç—Ç–æ —Ç–æ—Ç –∫–æ–¥ –∏ —Ç–µ –¥–∞–Ω–Ω—ã–µ, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–≥—É—Ç –∑–∞–≤–∏—Å–µ—Ç—å –ª—é–±—ã–µ –º–æ–¥—É–ª–∏, –Ω–æ _–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –ø–æ–≤—ã—à–∞–µ—Ç –∑–∞—Ü–µ–ø–ª–µ–Ω–∏–µ_, –ø–æ—ç—Ç–æ–º—É —Å—é–¥–∞ –º–æ–∂–Ω–æ –ø–æ–º–µ—â–∞—Ç—å –Ω–µ –ª—é–±–æ–π –∫–æ–¥. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —Ö–æ—Ä–æ—à–æ –æ–ø–∏—Å–∞–Ω–æ –≤ —Å—Ç–∞—Ç—å–µ [‚ÄúDDD, Hexagonal, Onion, Clean, CQRS, ‚Ä¶ How I put it all together‚Äù](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/).

–í —ç—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ shared kernel –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –≥–¥–µ –∏ –∫–æ–º—É —É–≥–æ–¥–Ω–æ. –¢–∞–∫–∏–µ —Ç–∏–ø—ã —Å–æ–±—Ä–∞–Ω—ã –≤ [`shared-kernel.d.ts`](https://github.com/bespoyasov/frontend-clean-architecture/blob/master/src/shared-kernel.d.ts).

### ¬´–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å¬ª –≤ –¥–æ–º–µ–Ω–µ

–í —Ñ—É–Ω–∫—Ü–∏–∏ [`createOrder`](https://github.com/bespoyasov/frontend-clean-architecture/blob/master/src/domain/order.ts#L15) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ¬´–±–∏–±–ª–∏–æ—Ç–µ—á–Ω–∞—è¬ª —Ñ—É–Ω–∫—Ü–∏—è `currentDatetime` –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞. –≠—Ç–æ –Ω–µ —Å–æ–≤—Å–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–æ–º–µ–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω –Ω–∏ –æ—Ç —á–µ–≥–æ –∑–∞–≤–∏—Å–µ—Ç—å.

–ü–æ-—Ö–æ—Ä–æ—à–µ–º—É, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∏–ø–∞ `Order` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–ª–∞—Å—Å–æ–º, –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª–∏ –±—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤–∫–ª—é—á–∞—è –¥–∞—Ç—É. –ê —Å–æ–∑–¥–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ –Ω–∞—Ö–æ–¥–∏–ª–æ—Å—å –±—ã –≤ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–º —Å–ª–æ–µ –≤ `orderProducts`:

```ts
async function orderProducts(user: User, products: Product[]) {
  const datetime = currentDatetime();
  const order = new Order(user, products, datetime);

  // ...
}
```

### –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å —é–∑-–∫–µ–π—Å–∞

–°–∞–º–∞ [—Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ `orderProduct`](https://github.com/bespoyasov/frontend-clean-architecture/blob/master/src/application/orderProducts.ts#L24) –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ—Ç—Ä—ã–≤–µ –æ—Ç –†–µ–∞–∫—Ç–∞. –•—É–∫-–æ–±—ë—Ä—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏—à—å –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —é–∑-–∫–µ–π—Å–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Å–∞–º —é–∑-–∫–µ–π—Å.

–í –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏—è —é–∑-–∫–µ–π—Å–∞ –±—ã–ª–∞ –±—ã –≤—ã–Ω–µ—Å–µ–Ω–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Ö—É–∫–∞, –∞ —Å–µ—Ä–≤–∏—Å—ã –±—ã–ª–∏ –±—ã –ø–µ—Ä–µ–¥–∞–Ω—ã —é–∑-–∫–µ–π—Å—É —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é DI:

```ts
type Dependencies = {
  notifier?: NotificationService;
  payment?: PaymentService;
  orderStorage?: OrderStorageService;
}

async function orderProducts(user: User, cart: Cart, dependencies: Dependencies = defaultDependencies) {
  const {notifier, payment, orderStorage} = dependencies;
  
  // ...
}
```

–•—É–∫ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª—Å—è –±—ã –≤ –∞–¥–∞–ø—Ç–µ—Ä:

```ts
function useOrderProducts() {
  const notifier = useNotifier();
  const payment = usePayment();
  const orderStorage = useOrdersStorage();
  
  return (user: User, cart: Cart) => orderProducts(user, cart, {
    notifier, payment, orderStorage,
  })
}
```

–í –¥–æ–∫–ª–∞–¥–µ —è –æ–±—Ä–∞—â–∞—é –≤–Ω–∏–º–∞–Ω–∏–µ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –∏ –ø–æ—è—Å–Ω—è—é, –∫–∞–∫ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —á–∏—Å—Ç–æ—Ç—ã –ø–æ–¥—Ö–æ–¥–∞. –í –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö –∂–µ —è –ø–æ—Å—á–∏—Ç–∞–ª, —á—Ç–æ —ç—Ç–æ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –æ—Ç–≤–ª–µ–∫–∞–ª–æ –±—ã –æ—Ç —Å—É—Ç–∏. –¢–∞–∫–∂–µ —ç—Ç–æ ‚Äî –æ–¥–∏–Ω –∏–∑ ¬´—Å—Ä–µ–∑–∞–Ω–Ω—ã—Ö —É–≥–ª–æ–≤¬ª, –æ –∫–æ—Ç–æ—Ä—ã—Ö —è —É–ø–æ–º–∏–Ω–∞—é –≤ –Ω–∞—á–∞–ª–µ –¥–æ–∫–ª–∞–¥–∞.

### –ö—É—Å—Ç–∞—Ä–Ω—ã–π DI

–í [–ø—Ä–∏–∫–ª–∞–¥–Ω–æ–º —Å–ª–æ–µ](https://github.com/bespoyasov/frontend-clean-architecture/blob/master/src/application/orderProducts.ts) –º—ã ¬´–≤–Ω–µ–¥—Ä—è–µ–º¬ª —Å–µ—Ä–≤–∏—Å—ã —Ä—É–∫–∞–º–∏:

```ts
export function useAuthenticate() {
  const storage: UserStorageService = useUserStorage();
  const auth: AuthenticationService = useAuth();

  // ...
}
```

–ü–æ-—Ö–æ—Ä–æ—à–µ–º—É, —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∏ —Å–¥–µ–ª–∞–Ω–æ —á–µ—Ä–µ–∑ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í —Å–ª—É—á–∞–µ —Å –†–µ–∞–∫—Ç–æ–º –∏ —Ö—É–∫–∞–º–∏ –º—ã, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö, –∫–∞–∫ ¬´–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä¬ª, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

–í –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —ç—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å DI –æ—Å–æ–±–æ —Å–º—ã—Å–ª–∞ –Ω–µ –±—ã–ª–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –±—ã –æ—Ç–≤–ª–µ–∫–∞–ª–æ –æ—Ç —Å—É—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
